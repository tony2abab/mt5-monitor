<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>å‰ç«¯è¨ºæ–·</title>
    <style>
        body {
            margin: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a2e;
            color: #fff;
        }
        .test {
            background: #16213e;
            border: 1px solid #0f3460;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { border-left: 4px solid #00ff88; }
        .error { border-left: 4px solid #ff4444; }
        button {
            background: #0f3460;
            color: #fff;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            margin: 5px;
        }
        button:hover { background: #1a4d7a; }
        pre {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 3px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” MT5 ç›£æ§å‰ç«¯è¨ºæ–·</h1>
    
    <div class="test">
        <h3>æ¸¬è©¦ 1ï¼šè¨ªå•ä¸»é </h3>
        <button onclick="test1()">æ¸¬è©¦ http://192.168.31.206/</button>
        <div id="result1"></div>
    </div>
    
    <div class="test">
        <h3>æ¸¬è©¦ 2ï¼šCSS æ–‡ä»¶</h3>
        <button onclick="test2()">æ¸¬è©¦ CSS åŠ è¼‰</button>
        <div id="result2"></div>
    </div>
    
    <div class="test">
        <h3>æ¸¬è©¦ 3ï¼šJS æ–‡ä»¶</h3>
        <button onclick="test3()">æ¸¬è©¦ JS åŠ è¼‰</button>
        <div id="result3"></div>
    </div>
    
    <div class="test">
        <h3>æ¸¬è©¦ 4ï¼šAPI é€£æ¥</h3>
        <button onclick="test4()">æ¸¬è©¦ API</button>
        <div id="result4"></div>
    </div>
    
    <div class="test">
        <h3>æ¸¬è©¦ 5ï¼šåœ¨æ–°çª—å£æ‰“é–‹</h3>
        <button onclick="window.open('http://192.168.31.206', '_blank')">åœ¨æ–°çª—å£æ‰“é–‹ä¸»é </button>
        <button onclick="window.open('http://localhost', '_blank')">åœ¨æ–°çª—å£æ‰“é–‹ localhost</button>
    </div>
    
    <div class="test">
        <h3>å®Œæ•´è¨ºæ–·å ±å‘Š</h3>
        <button onclick="fullDiagnosis()">é‹è¡Œå®Œæ•´è¨ºæ–·</button>
        <div id="fullReport"></div>
    </div>

    <script>
        async function test1() {
            const div = document.getElementById('result1');
            div.innerHTML = 'æ¸¬è©¦ä¸­...';
            try {
                const res = await fetch('http://192.168.31.206/');
                const text = await res.text();
                div.innerHTML = `
                    <div class="success">
                        <p>âœ… HTTPç‹€æ…‹: ${res.status}</p>
                        <p>Content-Type: ${res.headers.get('content-type')}</p>
                        <p>HTMLé•·åº¦: ${text.length} å­—ç¬¦</p>
                        <pre>${text.substring(0, 500)}</pre>
                    </div>
                `;
            } catch(e) {
                div.innerHTML = `<div class="error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }
        
        async function test2() {
            const div = document.getElementById('result2');
            div.innerHTML = 'æ¸¬è©¦ä¸­...';
            try {
                const res = await fetch('http://192.168.31.206/assets/index-DEJr-E91.css');
                const text = await res.text();
                div.innerHTML = `
                    <div class="success">
                        <p>âœ… CSS ç‹€æ…‹: ${res.status}</p>
                        <p>æ–‡ä»¶å¤§å°: ${text.length} å­—ç¬¦</p>
                        <p>åŒ…å« cyber-dark: ${text.includes('cyber-dark') ? 'æ˜¯' : 'å¦'}</p>
                        <pre>${text.substring(0, 300)}</pre>
                    </div>
                `;
            } catch(e) {
                div.innerHTML = `<div class="error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }
        
        async function test3() {
            const div = document.getElementById('result3');
            div.innerHTML = 'æ¸¬è©¦ä¸­...';
            try {
                const res = await fetch('http://192.168.31.206/assets/index-C9wShWGS.js');
                div.innerHTML = `
                    <div class="success">
                        <p>âœ… JS ç‹€æ…‹: ${res.status}</p>
                        <p>Content-Type: ${res.headers.get('content-type')}</p>
                    </div>
                `;
            } catch(e) {
                div.innerHTML = `<div class="error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }
        
        async function test4() {
            const div = document.getElementById('result4');
            div.innerHTML = 'æ¸¬è©¦ä¸­...';
            try {
                const res = await fetch('http://192.168.31.206:8080/api/nodes');
                const data = await res.json();
                div.innerHTML = `
                    <div class="success">
                        <p>âœ… API ç‹€æ…‹: ${res.status}</p>
                        <p>ç¯€é»æ•¸é‡: ${data.nodes.length}</p>
                        <p>åœ¨ç·šç¯€é»: ${data.summary.online}</p>
                        <pre>${JSON.stringify(data, null, 2).substring(0, 500)}</pre>
                    </div>
                `;
            } catch(e) {
                div.innerHTML = `<div class="error">âŒ éŒ¯èª¤: ${e.message}</div>`;
            }
        }
        
        async function fullDiagnosis() {
            const div = document.getElementById('fullReport');
            div.innerHTML = '<p>é‹è¡Œå®Œæ•´è¨ºæ–·...</p>';
            
            let report = '<div class="success">';
            report += '<h4>ğŸ“Š è¨ºæ–·çµæœ</h4>';
            
            // æ¸¬è©¦æ‰€æœ‰
            const tests = [
                { name: 'HTML', url: 'http://192.168.31.206/' },
                { name: 'CSS', url: 'http://192.168.31.206/assets/index-DEJr-E91.css' },
                { name: 'JS', url: 'http://192.168.31.206/assets/index-C9wShWGS.js' },
                { name: 'API', url: 'http://192.168.31.206:8080/api/nodes' }
            ];
            
            for(const test of tests) {
                try {
                    const res = await fetch(test.url);
                    report += `<p>âœ… ${test.name}: ${res.status} OK</p>`;
                } catch(e) {
                    report += `<p>âŒ ${test.name}: ${e.message}</p>`;
                }
            }
            
            report += '<h4>ğŸŒ ç€è¦½å™¨ä¿¡æ¯</h4>';
            report += `<p>User Agent: ${navigator.userAgent}</p>`;
            report += `<p>ç•¶å‰ URL: ${window.location.href}</p>`;
            
            report += '</div>';
            div.innerHTML = report;
        }
    </script>
</body>
</html>
