================================================================================
            如何組合三個文件成為完整的監控版 EA
================================================================================

我已經創建了 3 個文件：
1. 監控版_上半部.txt
2. 監控版_下半部.txt  
3. 監控版_OnTick函數.txt

================================================================================
【組合步驟】
================================================================================

步驟 1：創建新檔案
-----------------------------------
在 MetaEditor 中創建一個新的 mq5 文件：
File → New → Expert Advisor (template)
命名為：A計算盈虧_r9a_監控完整版.mq5


步驟 2：組合順序
-----------------------------------
按照以下順序複製貼上：

1️⃣ 打開「監控版_上半部.txt」
   → 全選 (Ctrl+A)
   → 複製 (Ctrl+C)
   → 貼到新 mq5 文件中

2️⃣ 打開「監控版_下半部.txt」
   → 全選 (Ctrl+A)
   → 複製 (Ctrl+C)
   → 貼到新 mq5 文件的【最後面】（接在上半部後面）

3️⃣ 打開「監控版_OnTick函數.txt」
   → 全選 (Ctrl+A)
   → 複製 (Ctrl+C)
   → 貼到新 mq5 文件的【最後面】（接在下半部後面）


步驟 3：儲存並編譯
-----------------------------------
1. Ctrl+S 儲存
2. F7 編譯
3. 檢查是否有錯誤


================================================================================
【完整結構】
================================================================================

組合後的文件結構應該是：

┌─────────────────────────────────────┐
│ 上半部 (監控版_上半部.txt)            │
├─────────────────────────────────────┤
│ - 版權和屬性聲明                      │
│ - include 引用                       │
│ - input 參數（包含監控參數）          │
│ - UI 控件聲明和函數                  │
│ - OnChartEvent                      │
│ - 工具函數                           │
│ - 監控函數（SendMonitorHeartbeat）   │
│            （SendMonitorABStats）   │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ 下半部 (監控版_下半部.txt)            │
├─────────────────────────────────────┤
│ - 全域變數（包含監控變數）            │
│ - 時間相關函數                       │
│ - GMT 函數                          │
│ - OnInit（包含監控初始化）           │
└─────────────────────────────────────┘
┌─────────────────────────────────────┐
│ OnTick (監控版_OnTick函數.txt)       │
├─────────────────────────────────────┤
│ - OnTick 函數（包含監控心跳和發送）  │
└─────────────────────────────────────┘


================================================================================
【驗證】
================================================================================

編譯成功後，檢查以下內容：

✅ 文件開頭有 #property version "9.02"
✅ input 參數區有「網頁監控參數」
✅ 有兩個監控函數：SendMonitorHeartbeat 和 SendMonitorABStats
✅ OnInit 最後有 SendMonitorHeartbeat()
✅ OnTick 開頭有心跳檢查
✅ OnTick 內有發送統計代碼


================================================================================
【設定】
================================================================================

編譯成功後：

1. MT5 → 工具 → 選項 → EA交易
2. 勾選「允許 WebRequest」  
3. 添加白名單：http://192.168.31.206:8080
4. 確定

5. 掛載 EA 到圖表
6. 檢查日誌應該看到：
   「========================================== 網頁監控已啟用 NodeID: A1_VPS0 ==========================================」
   「✓ 網頁監控心跳成功」

7. 按「開始」按鈕計算數據
8. 查看日誌應該看到：
   「✓ A/B統計發送成功」

9. 打開網頁：http://192.168.31.206


================================================================================
【提示】
================================================================================

- 三個文件必須按順序組合
- 不要遺漏任何一個文件
- 如果編譯錯誤，檢查是否有重複的代碼
- 所有繁體中文字符應該正常顯示


完成！🎉
================================================================================
